import uid from '$lib/extra/counterId.js';
import type { ToastBuilderConfig } from './ToastBuilder.js';
const html = String.raw;

export default {
	containerTemplate(config, position) {
		const prevContainer = document.querySelector('.svkit-toast-container.container-' + position);
		if (prevContainer && prevContainer.classList.contains(`container-${position}`)) {
			return prevContainer;
		}
		const div = document.createElement('div');
		div.id = `${config.id}-container`;
		div.className = `svkit-toast-container container-${position} svkit-toast-default-config`;
		return div;
	},

	contentTemplate(toastParam, config) {
		//Close Button
		const closeBtn = document.createElement('button');
		closeBtn.className = `svkit-toast__close-icon`;
		closeBtn.innerHTML = html`
			<svg
				width="12"
				height="12"
				viewBox="0 0 10 10"
				fill="none"
				xmlns="http://www.w3.org/2000/svg"
			>
				<path
					d="M1.70806 8.77906C1.52042 8.9667 1.26592 9.07211 1.00056 9.07211C0.735192 9.07211 0.480697 8.9667 0.293056 8.77906C0.105415 8.59142 0 8.33692 0 8.07156C0 7.94016 0.0258802 7.81005 0.0761628 7.68866C0.126445 7.56727 0.200146 7.45697 0.293056 7.36406L7.36406 0.294057C7.4569 0.201147 7.56714 0.127433 7.68847 0.0771256C7.8098 0.0268178 7.93985 0.000900985 8.0712 0.000854555C8.20255 0.000808124 8.33262 0.0266333 8.45399 0.0768552C8.57536 0.127077 8.68565 0.200713 8.77856 0.293557C8.87147 0.386402 8.94518 0.496637 8.99549 0.61797C9.04579 0.739302 9.07171 0.869355 9.07176 1.0007C9.0718 1.13205 9.04598 1.26212 8.99576 1.38349C8.94554 1.50486 8.8719 1.61515 8.77906 1.70806L1.70806 8.77906Z"
					fill="currentColor"
				/>
				<path
					d="M0.293056 1.70806C0.105415 1.52042 -1.97712e-09 1.26592 0 1.00056C1.97711e-09 0.735192 0.105415 0.480697 0.293056 0.293056C0.480697 0.105415 0.735192 1.97712e-09 1.00056 0C1.26592 -1.97712e-09 1.52042 0.105415 1.70806 0.293056L8.77806 7.36406C8.87097 7.4569 8.94468 7.56714 8.99499 7.68847C9.0453 7.8098 9.07121 7.93985 9.07126 8.0712C9.0713 8.20255 9.04548 8.33262 8.99526 8.45399C8.94504 8.57536 8.8714 8.68565 8.77856 8.77856C8.68571 8.87147 8.57548 8.94518 8.45414 8.99549C8.33281 9.04579 8.20276 9.07171 8.07141 9.07176C7.94006 9.0718 7.80999 9.04598 7.68862 8.99576C7.56725 8.94554 7.45697 8.8719 7.36406 8.77906L0.293056 1.70806Z"
					fill="currentColor"
				/>
			</svg>
		`;

		// CONTENT;
		const div = document.createElement('div');
		div.className = `svkit-toast ${toastParam.type} ${toastParam.html ? 'custom' : ''}`;
		div.id = toastParam.id;

		if (toastParam.text) {
			div.innerHTML = html`
				${toastParam.autoClose ? '<div class="auto-remove-progress"></div>' : ''}
				<div class="svkit-toast__content">
					${config.icons[toastParam.type]}
					<div class="">
						<h5 class="svkit-toast__title">${toastParam.type}</h5>
						<p class="svkit-toast__message">${toastParam.text}</p>
					</div>
				</div>
			`;
			div.insertAdjacentElement('beforeend', closeBtn);
		} else {
			div.innerHTML = toastParam.html;
			div.insertAdjacentElement('beforeend', closeBtn);
		}

		return {
			content: div,
			closeBtn
		};
	},

	id: `toast-${uid()}`,

	icons: {
		success: `<svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg" > <path  fill-rule="evenodd" clip-rule="evenodd" d="M16.5 33C18.6668 33 20.8124 32.5732 22.8143 31.744C24.8161 30.9148 26.6351 29.6994 28.1673 28.1673C29.6994 26.6351 30.9148 24.8161 31.744 22.8143C32.5732 20.8124 33 18.6668 33 16.5C33 14.3332 32.5732 12.1876 31.744 10.1857C30.9148 8.18385 29.6994 6.3649 28.1673 4.83274C26.6351 3.30057 24.8161 2.08519 22.8143 1.25599C20.8124 0.426785 18.6668 -3.2288e-08 16.5 0C12.1239 6.52086e-08 7.92709 1.73839 4.83274 4.83274C1.73839 7.92709 0 12.1239 0 16.5C0 20.8761 1.73839 25.0729 4.83274 28.1673C7.92709 31.2616 12.1239 33 16.5 33ZM16.0747 23.1733L25.2413 12.1733L22.4253 9.82667L14.542 19.2848L10.4628 15.2038L7.8705 17.7962L13.3705 23.2962L14.7895 24.7152L16.0747 23.1733Z" fill="#47D764" /> </svg>`,
		error: `<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 16.6667C0 7.46167 7.46167 0 16.6667 0C25.8717 0 33.3333 7.46167 33.3333 16.6667C33.3333 25.8717 25.8717 33.3333 16.6667 33.3333C7.46167 33.3333 0 25.8717 0 16.6667ZM22.845 10.49C23.1575 10.8025 23.333 11.2264 23.333 11.6683C23.333 12.1103 23.1575 12.5341 22.845 12.8467L19.0233 16.6683L22.845 20.49C23.1486 20.8043 23.3166 21.2253 23.3128 21.6623C23.309 22.0993 23.1337 22.5174 22.8247 22.8264C22.5157 23.1354 22.0977 23.3107 21.6607 23.3145C21.2237 23.3183 20.8027 23.1503 20.4883 22.8467L16.6667 19.025L12.845 22.8467C12.5307 23.1503 12.1097 23.3183 11.6727 23.3145C11.2357 23.3107 10.8176 23.1354 10.5086 22.8264C10.1996 22.5174 10.0243 22.0993 10.0205 21.6623C10.0167 21.2253 10.1847 20.8043 10.4883 20.49L14.31 16.6683L10.4883 12.8467C10.1847 12.5323 10.0167 12.1113 10.0205 11.6743C10.0243 11.2373 10.1996 10.8193 10.5086 10.5103C10.8176 10.2013 11.2357 10.026 11.6727 10.0222C12.1097 10.0184 12.5307 10.1864 12.845 10.49L16.6667 14.3117L20.4883 10.49C20.8009 10.1775 21.2247 10.002 21.6667 10.002C22.1086 10.002 22.5325 10.1775 22.845 10.49Z" fill="#FF355B"/></svg>`,
		info: `<svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M0 16.5C0 25.6121 7.38788 33 16.5 33C25.6121 33 33 25.6121 33 16.5C33 7.38788 25.6121 0 16.5 0C7.38788 0 0 7.38788 0 16.5ZM18.2188 8.25C18.2188 8.70584 18.0377 9.14301 17.7153 9.46534C17.393 9.78767 16.9558 9.96875 16.5 9.96875C16.0442 9.96875 15.607 9.78767 15.2847 9.46534C14.9623 9.14301 14.7812 8.70584 14.7812 8.25C14.7812 7.79416 14.9623 7.35699 15.2847 7.03466C15.607 6.71233 16.0442 6.53125 16.5 6.53125C16.9558 6.53125 17.393 6.71233 17.7153 7.03466C18.0377 7.35699 18.2188 7.79416 18.2188 8.25ZM16.5 12.375C16.8647 12.375 17.2144 12.5199 17.4723 12.7777C17.7301 13.0356 17.875 13.3853 17.875 13.75V24.75C17.875 25.1147 17.7301 25.4644 17.4723 25.7223C17.2144 25.9801 16.8647 26.125 16.5 26.125C16.1353 26.125 15.7856 25.9801 15.5277 25.7223C15.2699 25.4644 15.125 25.1147 15.125 24.75V13.75C15.125 13.3853 15.2699 13.0356 15.5277 12.7777C15.7856 12.5199 16.1353 12.375 16.5 12.375Z" fill="#2F86EB"/></svg>`,
		warning: `<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M17 0.856659C13.7366 0.856659 10.5465 1.82437 7.8331 3.63741C5.11969 5.45045 3.00484 8.0274 1.75599 11.0424C0.507149 14.0574 0.180394 17.375 0.81705 20.5756C1.45371 23.7763 3.02518 26.7163 5.33274 29.0239C7.64031 31.3315 10.5803 32.903 13.781 33.5396C16.9817 34.1763 20.2993 33.8495 23.3143 32.6007C26.3293 31.3518 28.9062 29.237 30.7192 26.5236C32.5323 23.8102 33.5 20.62 33.5 17.3567C33.4954 12.982 31.7555 8.78785 28.6622 5.6945C25.5688 2.60115 21.3747 0.861279 17 0.856659ZM15.7308 9.74127C15.7308 9.40465 15.8645 9.08182 16.1025 8.84379C16.3405 8.60576 16.6634 8.47204 17 8.47204C17.3366 8.47204 17.6595 8.60576 17.8975 8.84379C18.1355 9.08182 18.2692 9.40465 18.2692 9.74127V18.6259C18.2692 18.9625 18.1355 19.2853 17.8975 19.5234C17.6595 19.7614 17.3366 19.8951 17 19.8951C16.6634 19.8951 16.3405 19.7614 16.1025 19.5234C15.8645 19.2853 15.7308 18.9625 15.7308 18.6259V9.74127ZM17 26.2413C16.6235 26.2413 16.2554 26.1296 15.9423 25.9204C15.6292 25.7112 15.3852 25.4139 15.2411 25.066C15.097 24.7181 15.0593 24.3353 15.1327 23.966C15.2062 23.5967 15.3875 23.2575 15.6538 22.9912C15.92 22.7249 16.2593 22.5436 16.6286 22.4702C16.9979 22.3967 17.3807 22.4344 17.7286 22.5785C18.0765 22.7226 18.3738 22.9666 18.583 23.2797C18.7922 23.5928 18.9038 23.9609 18.9038 24.3374C18.9038 24.8424 18.7033 25.3266 18.3462 25.6836C17.9892 26.0407 17.5049 26.2413 17 26.2413Z" fill="#FFC021"/></svg>`
	},
	closeBtnSelector: `data-btn-close`
} satisfies ToastBuilderConfig;
